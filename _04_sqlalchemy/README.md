## Fastapi lesson 3

Мы успешно создали таблицу в базе данных, не написав ни строчки кода на sql,
используя Python в асинхронном подходе (sqlalchemy 2.0).
Модель описана максимально просто и коротко,
и если посмотреть в файл ```main.py``` мы воспользовались помощником ```lifespan```
для того, чтобы создать новую БД. Это делается через ```Base.metadata.create_all```,
и он создает все таблицы. А если БД еще не была создана, то она создается автоматически.

```
_04_sqlalchemy
└── core  // ЯДРО НАШЕГО ПРИЛОЖЕНИЯ
   ├── models
   │    ├── __init__.py  // импорты моделей
   │    │  
   │    ├── base.py      // модель колонки id (единая для всех таблиц)
   │    │                // функция __tablename__(cls) для автосоздания имени таблицы
   │    │                
   │    ├── db_helper.py // модель асинхронного движка и асинхронной сессии в едином классе: 
   │    │                //           (в тело движка передаются настройки БД из settings.py)
   │    │                //           (экземпляр модели db_helper создается в этом же модуле)
   │    │                
   │    └── product.py   // модель таблицы "products"
   │
   ├── __init__.py
   └──settings.py    // BASE_DIR переменная окружения для хранения пути к БД
                     // settings настройки для базы данных
  ...
// ЗАПУСКАЕМЫЙ ФАЙЛ
   ├──main.py     // функция lifespan:
   │              // 1. Запускает и поддерживает работу движка в асинхронном режиме
   │              // 2. Создает таблицы, в соответствии с моделями, принадлежащими к классу Base,
   │              //    (исключаются те классы, у которых атрибут __abstract__ = True)
   │              //    (по умолчанию таблица не пересоздаётся, если она уже есть в базе)
  ...
```
